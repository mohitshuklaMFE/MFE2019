# Problem Set 2
Name: Mohit Shukla

## Question 1
Construct the equal-weighted bond market return, value-weighted bond market return, and lagged total bond market capitalization using CRSP Bond data 1. Your output should be from
January 1926 to December 2018, at a monthly frequency.

I used the same methods used in the previous assignment to create a Bond Return series. But before calculating the portfolio time series, I conduct a series of data cleaning as part of my PS2_Q1 function. Next, I describe my data cleaning process and their respective assumptions:
*	Universe of stocks: In this case, we do no remove any bonds and keep all the bonds in the data.
*	Market Capitalization calculation: We are given the outstanding amount in millions, which I use as is. I compute the previous month market cap, and wherever the values were not given, those were taken as 0, as removing them would affect equal weighted returns.
*	Missing returns: The missing returns were indicated by -99. Those returns were removed.
*	Portfolio weights: The portfolio weights for Value-weighted return is taken as the market cap of the bond, divided by the sum-total market capitalization of all the bonds as on that day.
*	Sample period: The sample period has been selected from Dec-1925 to Dec-2018, which allows me to generate lag Market Cap data from Jan-1926 onwards.
*	Index generation: For equal-weighted return, we had to take the mean of returns of all stocks on that date. For Value-weighted return, we need to multiply the return of a stock with the portfolio weights of the previous month.


## Question 2
Aggregate stock, bond, and riskless datatables. For each year-month, calculate the lagged market value and excess value-weighted returns for both stocks and bonds. Your output should be from January 1926 to December 2018, at a monthly frequency.

The Monthly CRSP Stocks returns were generated by running the last week program. We combine that with the above Bond returns and the risk-free returns to do our analysis.
*	Risk Free Returns: We chose 90-day treasury return as our risk-free rate, similar to what the authors of the paper have chosen
*	Excess Return: The excess returns are calculated by subtracting the 90-day treasury rate from the Value weighted returns of both stock and Bonds.
*	Market Cap: The values of market cap are retained as provided in the Input data file.

## Question 3
Calculate the monthly unlevered and levered risk-parity portfolio returns as defined by Asness, Frazzini, and Pedersen (2012).3 For the levered risk-parity portfolio, match the value-weighted portfolio's over the longest matched holding period of both. Your output should be from January 1926 to December 2018, at a monthly frequency.

In this case, I again retained the Stock and Bond excess returns from the Input. The portfolio returns are generated by summing the returns of stocks and bonds after multiplying to their respective weights.
*	Excess Value Weighted Returns: The excess value weighted returns are generated by choosing the market cap as the weights for stock and bond.
*	Excess 60/40 portfolio: In this case, the stocks are given 60% weight while 40% weight is given to the bonds. 
*	Inverse Sigma Hat: For both stocks and bonds, these values are generated by taking the inverse of standard deviation of previous 36 months for each date.
*	Unlevered k: This is defined to compute to calculate the weight of both stock and bonds. It comes as the inverse of sum of inverse of Sigma Hat of Stocks and Bonds.
*	Excess Unlevered Return: The excess unlevered return is calculated by taking the weights calculated above to generate combined portfolio returns.
*	Levered k: This is a constant number, calculated such that the standard deviation of value weighted portfolio is equal to the standard deviation of the levered portfolio.
*	Excess Levered Return: This return is computed by taking the above value of k to define the weights of the portfolio.

## Question 4
Replicate and report Panel A of Table 2 in Asness, Frazzini, and Pedersen (2012), except for Alpha and t-stat of Alpha columns. Specifically, for all strategies considered, report the annualized average excess returns, t-statistic of the average excess returns, annualized volatility, annualized Sharpe Ratio, skewness, and excess kurtosis. Your sample should be from January 1930 to June 2010, at monthly frequency. Match the format of the table to the extent possible. Discuss the difference between your table and the table reported in the paper. It is zero? If not, justify whether the difference is economically negligible or not. What are the reasons a nonzero difference?

The input for this case is the resulting file generated above. The portfolio comparison is given in the following table

Table1: Summary Statistics

Excess Return	t-Stat. of Excess Return	Volatility	Sharpe Ratio	Skewness	Excess Kurtosis

CRSP stocks	6.89%	3.3539	18.89%	0.3649	0.2129	7.6287

CRSP bonds	1.22%	3.5520	3.16%	0.3864	-0.1070	3.9711

Value-weighted portfolio	4.11%	2.5258	14.95%	0.2748	0.4727	13.6106

60/40 portfolio	4.62%	3.6768	11.56%	0.4000	0.2265	7.5863

RP, unlevered	1.93%	4.3227	4.10%	0.4702	-0.0010	4.5579

RP	7.13%	4.4173	14.83%	0.4805	-0.3344	1.7192

Comparing from the file, we see the results are very close. The small difference is due to the choice of data source and the missing values.


The calculations are done as per the following:
*	Sample period: Monthly from July 1926 to June 2010. 
*	Annualized Mean: We use the annualized mean here to calculate the average annualized return. The annualized mean here is given by

\mu=\frac{12}{N}\left(\sum_{i=1}^{N}r_i\right)
*	Annualized Standard Deviation: The annualized standard deviation is given by

\sigma=\sqrt{\frac{12}{N}\sum_{i=1}^{N}\left(r_i-\mu\right)^2}

*	Sharpe Ratio: The Annualized Sharpe Ratio is calculated as the ratio of annualized mean divided by the annualized standard deviation

SR=\frac{\mu}{\sigma}

* Skewness: The Skewness of the portfolio is defined as the following. Please note that the skewness number here is not annualized.

Skewness=\frac{1}{N}\frac{\sum_{i=1}^{N}\left(r_i-\mu\right)^3}{\sigma^3}

* Excess Kurtosis: I calculate excess kurtosis from the monthly time series directly (no annualization, and no logs) using the full sample. 

Excess\ Kurtosis=\frac{1}{N}\frac{\sum_{i=1}^{N}\left(r_i-\mu\right)^4}{\sigma^4}\ -\ 3
